---
// No props needed
---
<section id="get-info" class="py-12 bg-white px-4 sm:px-6 lg:px-8">
  <div class="max-w-4xl mx-auto flex flex-col items-center justify-center">
    
    <!-- TITLE + MASCOT -->
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-10">
      <img
        src="/assets/pulpo.png"
        alt="Pulpo RASS"
        class="w-28 h-auto sm:w-32 sm:h-auto drop-shadow-md"
      />
      <h2 class="text-3xl md:text-6xl font-display font-bold text-kidslab-naranja text-center sm:text-left leading-tight">
        Letâ€™s take the first step!
      </h2>
    </div>

    <!-- FORM -->
    <form id="whatsapp-form" class="flex flex-col sm:flex-row items-center justify-center gap-4">
      <input
        id="name"
        type="text"
        name="name"
        placeholder="Your Name"
        required
        class="border border-gray-300 rounded-md p-2 w-full sm:w-64"
      />

      <div class="flex gap-2 w-full sm:w-auto">
        <select id="country-code" name="country-code" required class="border border-gray-300 rounded-md p-2 w-24">
          <option value="57">ðŸ‡¨ðŸ‡´ +57</option>
          <option value="503" selected>ðŸ‡¸ðŸ‡» +503</option>
          <option value="1">ðŸ‡ºðŸ‡¸ +1</option>
        </select>

        <input
          id="phone"
          type="tel"
          name="phone"
          placeholder="Your Phone"
          required
          class="border border-gray-300 rounded-md p-2 w-full sm:w-64"
        />
      </div>

      <button
        type="submit"
        class="bg-kidslab-naranja text-white px-6 py-2 rounded-full hover:bg-orange-500 transition"
      >
        SEND
      </button>
    </form>

    <!-- DISCLAIMER -->
    <p class="text-sm text-gray-500 mt-3 text-center">
      Only used to send you course info. No spam â€” just joyful learning! ðŸ§ âœ¨
    </p>
  </div>

  <!-- JavaScript block -->
  <script type="module">
    const form = document.getElementById('whatsapp-form');

    form.addEventListener('submit', async (e) => {
      e.preventDefault(); // ðŸ’¥ prevents default submission

      const name = document.getElementById('name').value;
      const code = document.getElementById('country-code').value;
      const phone = document.getElementById('phone').value.trim();

      if (!name || !phone) return;

      // ðŸ’¡ Trigger Pipedream webhook
      try {
        await fetch('https://eoj8cb91g0he9hd.m.pipedream.net', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name,
            countryCode: code,
            phone
          })
        });
      } catch (err) {
        console.error('Failed to send to webhook:', err);
      }

      // ðŸ’¬ Launch WhatsApp to static academy number
      const academyNumber = '50378258472';
      const message = encodeURIComponent(`Hola! Mi nombre es ${name}. Mi nÃºmero es +${code} ${phone}. Estoy interesad@ en los cursos de Kidslab. Â¿Me puedes compartir mÃ¡s informaciÃ³n?`);
      const whatsappUrl = `https://wa.me/${academyNumber}?text=${message}`;

      window.open(whatsappUrl, '_blank');

      // âœ… Redirect after short delay
      setTimeout(() => {
        window.location.href = '/en/thank-you';
      }, 2000);
    });
  </script>
</section>
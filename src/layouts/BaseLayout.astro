---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import "/src/styles/global.css";

const {
  lang,
  title = "Kidslab â€” A Creative Tech Lab for the Next Generation",
  description = "Where creativity meets code. Kidslab is the first AI-focused creative tech academy for kids in Latin America.",
  ogImage = "/assets/social-preview.webp", // page can override this
} = Astro.props;
---

<html lang={lang}>
  <head>

<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1347569296974206');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1347569296974206&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>{title}</title>
    <meta name="description" content={description} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta name="twitter:card" content="summary_large_image" />

    <!-- Perf preconnects -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://use.typekit.net">
    <link rel="preconnect" href="https://code.iconify.design">

    <!-- Iconify + Swiper (CDN) -->
    <script type="module" src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Typography -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <link href="https://use.typekit.net/bct8okz.css" rel="stylesheet" />
  </head>

  <body class="min-h-screen flex flex-col bg-white text-gray-900 overflow-x-clip">
    <!-- a11y skip link -->
    <a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-white text-kidslab-morado px-3 py-1 rounded">
      Skip to content
    </a>

    <Header lang={lang} />

    <main id="main" class="flex-1">
      <slot />
    </main>

    <Footer lang={lang} />

    <!-- Swiper init (scoped, safe if slider not present) -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const el = document.querySelector('.testimonial-slider');
        if (!el) return;
        new Swiper('.testimonial-slider', {
          loop: true,
          autoplay: { delay: 6000, disableOnInteraction: false },
          pagination: { el: '.swiper-pagination', clickable: true },
          slidesPerView: 1,
          spaceBetween: 24,
          breakpoints: { 768: { slidesPerView: 2 }, 1024: { slidesPerView: 3 } }
        });
      });
    </script>

    <!-- Alpine (for Language Switcher) -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  </body>
</html>